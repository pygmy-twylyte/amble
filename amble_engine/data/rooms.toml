# Generated by amble_script from /home/dave/Code/rust/amble/amble_script/data/Amble (62 files)
# Do not edit: this file is compiled from DSL.
# Source Hash (fnv64): 0c4d4c384821f65b

# room aperture-lab (source line 5)
[[rooms]]
id = "aperture-lab"
name = "Aperture Science Laboratory"
base_description = "The unnaturally white—walls, floor, ceiling, even the air here feels clinical and overexposed. Everything hums at a frequency designed to encourage strict compliance. A single console blinks on a table beside a highly over-engineered printer labeled \"Aperture Science Hospitality Generator.\""
location = "Nowhere"

[rooms.exits."through the portal"]
to = "portal-room"

[rooms.exits."into the vault"]
to = "stargate-room"

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "burned-invitation" }, { type = "flagUnset", flag = "invitation-sans-ignition" }]
text = "A smoky haze and the lingering smell of burned paper permeate the room."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "lab-fire-raging" }]
text = "Flames leap from foamy surfaces around you, while the sprinklers try in vain to douse the oily residue!"

[[rooms.overlays]]
conditions = [{ type = "flagComplete", flag = "foam-fire-in-lab" }, { type = "flagUnset", flag = "invitation-sans-ignition" }]
text = "Charred, soggy and warped lab and office equipment are everywhere. Astoundingly, the printer still seems to be working -- and with a job pending."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "invitation-sans-ignition" }]
text = "The printer is in its 3-day cooldown period, and there are no jobs pending."

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "invitation" }]
text = "A glowing, steaming, sizzling invitation engraved on an asbestos sheet sits on the floor in front of the printer."
# room b-a-office (source line 5)
[[rooms]]
id = "b-a-office"
name = "Amble Adventures Main Office"
base_description = "The office of Amble Adventures, a wholly disowned subsidiary of Brains Anonymous™, is a shrine to barely-funded creativity. Faded posters of games that were never released adorn the walls, including one titled 'PONG Construction Set 3000'. A sagging ficus looms in the corner like it’s been through something. An inconspicuous door in the north wall is marked with a \"Supplies\" sign, hanging at a carefree slant. An Initech™ Poetry Performer plays possum in another corner, hoping you don't notice it."
location = "Nowhere"

[rooms.exits."front door"]
to = "main-lobby"

[rooms.exits."closet door"]
to = "supply-closet"

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "panic-room-open" }]
text = "The \"Planning to Plan\" whiteboard has parted to reveal a heavy, vault-like door set into the west wall."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "panic-room-open" }]
text = "A floor-to-ceiling whiteboard on the west wall boasts an impressive flowchart titled \"Planning to Plan\"."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "got-visitor-pass" }, { type = "playerMissingItem", item_id = "invitation" }]
text = "A robotic receptionist sits behind a tidy desk adorned with figurines of Portal turrets and companion cubes. She (it?) pointedly ignores you."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "got-visitor-pass" }, { type = "playerHasItem", item_id = "invitation" }]
text = "The receptionist, sensing something, tries furtively to see what you have in your pack."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "got-visitor-pass" }]
text = "The receptionist looks up from rearranging her turrets, giving you a subtle wink and a grin."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "lost-and-found-opened" }]
text = "The Lost & Found box sits with its lid hanging open, contents plainly visible."
# room lift-bank-main (source line 1)
[[rooms]]
id = "lift-bank-main"
name = "Elevator Bank (Main Floor)"
base_description = "A bank of elevators waits here, none of which seem eager to go anywhere. One of them is open and labeled 'MAIN LIFT' in glowing teal script.  To the east, a door marked 'LOUNGE' is just slightly ajar, as if luring you to come in. The lobby is still visible through the archway south."
location = "Nowhere"

[rooms.exits."into the elevator"]
to = "lift-main"

[rooms.exits."to the lounge"]
to = "lounge"

[rooms.exits."through the archway"]
to = "main-lobby"

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "got-elevator-keycard" }]
text = "The proximity card reader next to the lift now somewhat sheepishly displays: ACCESS GRANTED."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "got-elevator-keycard" }]
text = "The proximity card reader next to the lift displays: ACCESS DENIED -- and with no sympathy whatsoever."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "gonk_droid" }, { type = "npcInState", npc_id = "gonk_droid", state = "normal" }]
text = "A gonk droid pokes at the elevator call panel, emitting perplexed gonks."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "gonk_droid" }, { type = "npcInState", npc_id = "gonk_droid", state = "happy" }]
text = "The gonk droid hums a cheerful gonk as it watches the lift lights blink."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "normal" }]
text = "Dibbler loiters by the elevators, promising snacks for the ride."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "happy" }]
text = "Dibbler beams, certain elevator patrons are his best customers."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "bored" }]
text = "Dibbler counts his sausages as the lift lights blink listlessly."
# room lift-main (source line 4)
[[rooms]]
id = "lift-main"
name = "Elevator (Main Floor)"
base_description = "The elevator interior is surprisingly luxurious -- polished chrome panels, soft lighting, and a faint scent of something that might be vanilla or data corruption."
location = "Nowhere"

[rooms.exits."out to main floor"]
to = "lift-bank-main"

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "got-elevator-keycard" }]
text = "The [main] and [aa-3] buttons are now both lit -- but [aa-3] flickers and then glows intensely bright intermittently."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "got-elevator-keycard" }]
text = "There are only two buttons: [main] is lit, but [aa-3] is dark."
# room lounge (source line 1)
[[rooms]]
id = "lounge"
name = "Coffee Lounge"
base_description = "A small space to relax, with a worn sofa, a ringed coffee table bearing a few magazines, and part of a jigsaw puzzle depicting the USS Enterprise D."
location = "Nowhere"

[rooms.exits.west]
to = "lift-bank-main"

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "lebowski_rug" }]
text = "An ornate, brick red rug lies in the center of the room and somehow -- really ties the room together."

[[rooms.overlays]]
conditions = [{ type = "itemAbsent", item_id = "lebowski_rug" }]
text = "The trap door opened in the floor reveals a ladder down to a hidden room below."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "lab-fire-raging" }]
text = "Occasional wisps of black smoke rise from the portal room below."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "coffee-brewed" }]
text = "The coffee machine emits a few satisfied clicks as the rich aroma of fresh coffee fills the lounge."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "coffee-brewed" }]
text = "An automatic drip coffee machine stands empty but ready to brew on a small stand in one corner."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "gonk_droid" }, { type = "npcInState", npc_id = "gonk_droid", state = "normal" }]
text = "The gonk droid mills about by the coffee cart, muttering quiet gonks."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "gonk_droid" }, { type = "npcInState", npc_id = "gonk_droid", state = "happy" }]
text = "The gonk droid gonks to an unheard upbeat rhythm by the sofa."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "normal" }]
text = "Dibbler lounges here, pitching snacks to passing staff and adventurers."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "happy" }]
text = "Dibbler cheerfully offers samples to anyone near the sofa."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "bored" }]
text = "Dibbler stares at the coffee pot, wondering if he can sell the used grounds somehow."
# room main-lobby (source line 1)
[[rooms]]
id = "main-lobby"
name = "Main Lobby"
base_description = "The lobby is clinically clean in a way that feels suspicious. A slightly humming vending machine stands beside an empty podium bearing an emblem that reads, in gothic script: 'ALLIED TEMPORARY LIFEFORMS'. A softly glowing sign on the north wall reads 'Elevator Access', while arrows on the east and west walls point toward other destinations with less enthusiasm."
location = "Nowhere"

[rooms.exits.north]
to = "lift-bank-main"

[rooms.exits.south]
to = "front-entrance"

[rooms.exits.east]
to = "restaurant"

[rooms.exits.west]
to = "b-a-office"

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "gonk_droid" }, { type = "npcInState", npc_id = "gonk_droid", state = "normal" }]
text = "A gonk droid stands idle in the corner, muttering to itself and tottering in circles."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "gonk_droid" }, { type = "npcInState", npc_id = "gonk_droid", state = "happy" }]
text = "The gonk droid gonks a happy tune in the corner, charging the battery you gave it."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "normal" }]
text = "C.M.O.T. Dibbler hawks dubious sausages to anyone entering."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "happy" }]
text = "Dibbler grins broadly, offering a complimentary bite."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "bored" }]
text = "Dibbler mutters about slow lobby sales."
# room patio (source line 6)
[[rooms]]
id = "patio"
name = "BLINDING GLARE"
base_description = "You see almost nothing at all, except for a momentary glimpse of a few scattered details before you are blinded. The pure white light here is stare-into-the-sun bright and seems to come from all directions, forcing you to shield your eyes with your arm and flee."
location = "Nowhere"

[rooms.exits.west]
to = "restaurant"

[[rooms.overlays]]
conditions = [{ type = "playerHasItem", item_id = "peril_sunglasses" }, { type = "flagSet", flag = "patio-gate-open" }]
text = "The Stargate shimmers off to the side by the kitchen door, its connection to the laboratory still open."

[[rooms.overlays]]
conditions = [{ type = "playerHasItem", item_id = "peril_sunglasses" }, { type = "flagUnset", flag = "patio-gate-open" }]
text = "A large metallic ring stands by the kitchen door. It might be a backdrop for weddings, but it's covered in hieroglyphs and other odd symbols -- none of them rings, hearts, doves, or branding irons."
# room poetry-panic (source line 5)
[[rooms]]
id = "poetry-panic"
name = "Bad Poetry Panic Room"
base_description = "A concrete and titanium vacuum-sealed room equipped with noise generators, active voice-cancelling harmonics and Cone of Silence technology. A seal by the door proudly boasts that the chamber is almost completely Vogon poetry-proof."
location = "Nowhere"

[rooms.exits.east]
to = "b-a-office"
# room portal-room (source line 5)
[[rooms]]
id = "portal-room"
name = "Portal Room"
base_description = "A bare white room with a white tile floor. A ladder leads back up through the trap door in the ceiling. Three of the four walls are used as whiteboards, littered with obscure diagrams and equations. In the center, a black and white Portal gun is affixed to a pedestal and aimed squarely at the fourth wall."
location = "Nowhere"

[rooms.exits."up the ladder"]
to = "lounge"

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "portal-gun-powered" }]
text = "The power indicator on the Portal gun now glows a steady green."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "portal-opened" }]
text = "There is a sparkling blue portal in the fourth wall, with a view through to a laboratory space beyond."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "portal-opened" }]
text = "A bullseye adorns the fourth, otherwise blank wall. A photo of a watch-sized computer attached to a potato battery is taped in the center, for some reason."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "portal-opened" }, { type = "flagSet", flag = "lab-fire-raging" }]
text = "Black smoke and the occasional lick of flame pour through the portal from the laboratory inferno on the other side."
# room restaurant (source line 5)
[[rooms]]
id = "restaurant"
name = "Restaurant at the End of the Universe"
base_description = """
Acturan A-POP wafts through invisible speakers, accompanied by the occasional sound of imploding galaxies. A tasteful sign declares this to be the Restaurant at the End of the Universe, though it appears to be between dinner rushes. Tables float slightly above the ground and rearrange themselves when you're not looking. A reservation book is here, chained to the host's podium. Restrooms lie to the south bearing a sign in fancy script reading:

                             VIP PAN-SPECIES RESTROOM
                       (must possess visitor pass to enter)

Patio seating stretches farther east."""
location = "Nowhere"

[rooms.exits.west]
to = "main-lobby"

[rooms.exits.east]
to = "patio"

[rooms.exits.south]
to = "vip-bathroom"
barred_message = "The door apologizes profusely for refusing to open, explaining that it's forced by programming not to let you in without a visitor's pass."
required_items = ["visitor_pass"]

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "normal" }]
text = "Dibbler circles the tables, insisting his sausages are a bargain."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "happy" }]
text = "Dibbler proclaims today's special with exaggerated flair."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "bored" }]
text = "Dibbler pokes at an empty table, grumbling about the quiet rush."
# room stargate-room (source line 8)
[[rooms]]
id = "stargate-room"
name = "Stargate Room"
base_description = """
A hangar-size concrete room, connected to the Aperture lab through a huge, round vault door. Little light reaches the darkened corners of the room, but at its center stands a round control console ringed with hieroglyphs, obscure emojis, and diagrams from IKEA assembly manuals. A giant metallic ring festooned with similar symbols stands on end at the end of the room.

    There are three large buttons in the center of the console:"""
location = "Nowhere"

[rooms.exits."vault door"]
to = "aperture-lab"

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "read-plaque-1" }]
text = "- On the left, shaped like a tree, raised."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "read-plaque-1" }]
text = "- On the left, shaped like a tree, sunken."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "read-plaque-2" }]
text = "- In the middle, shaped like a snowflake, raised."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "read-plaque-2" }]
text = "- In the middle, shaped like a snowflake, sunken."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "read-plaque-3" }]
text = "- On the right, shaped like a fork, raised."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "read-plaque-3" }]
text = "- On the right, shaped like a fork, sunken."
# room supply-closet (source line 5)
[[rooms]]
id = "supply-closet"
name = "Supply Closet"
base_description = "A small closet lit by a bare bulb being repeatedly rammed by a fluttering moth. Crowded shelves offer paper products, bottles of toner, staples, and other office... ... staples."
location = "Nowhere"

[rooms.exits.south]
to = "b-a-office"
# room vip-bathroom (source line 5)
[[rooms]]
id = "vip-bathroom"
name = "VIP Bathroom"
base_description = "Blinding white tile and pristine mirrors make it almost seem like this pan-gender, pan-species bathroom has never been used, but a lingering asparagus odor suggests otherwise."
location = "Nowhere"

[rooms.exits.north]
to = "restaurant"
# room east-of-building (source line 5)
[[rooms]]
id = "east-of-building"
name = "East of Building"
base_description = """
You’re east of the building now, facing a patch of ornamental gravel and a struggling yucca plant. The air here smells faintly of ozone and buttered lobster, though the source is unclear.

The side of the building appears to be a normal wall, but you keep glimpsing something that looks like -- patio umbrellas? -- from the corner of your eye. You briefly wonder if the building is bending space or if your sense of geography is just feeling shy.

The walkway wraps around the building to the northwest and southwest."""
location = "Nowhere"

[rooms.exits.northwest]
to = "loading-dock"

[rooms.exits.southwest]
to = "front-entrance"

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "normal" }]
text = "Dibbler wanders here, pitching sausages to the patient yucca."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "happy" }]
text = "Dibbler hums a sales jingle, certain new patrons will arrive."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "bored" }]
text = "Dibbler kicks at the gravel, lamenting the lack of customers."

[[rooms.overlays]]
conditions = [{ type = "playerHasItem", item_id = "dental_floss" }]
text = "The weird bush looks oddly bare now, stripped of its floss-like strands."
# room front-entrance (source line 5)
[[rooms]]
id = "front-entrance"
name = "Front Entrance"
base_description = """
Potted plants flank a plain, darkened glass door on the front of the building to the north. As you approach the door, an Initech Eye-bot™ mounted above it mutters judgementally as it scans you. A sign above it reads:

                       \"Always Know Where Your Towel Is\"

Paved paths lead around the building to the east and west."""
location = "Nowhere"

[rooms.exits.north]
to = "main-lobby"
barred_message = "Not so fast. The Initech Eye-bot™ is absolutely insistent that you have a towel before you go inside."
required_flags = [{ type = "simple", name = "got-towel" }]

[rooms.exits.west]
to = "snowfield"

[rooms.exits.east]
to = "east-of-building"

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "got-towel" }]
text = "Finished scanning, the Eye-bot™'s iris glows green. The doors unlatch and open slightly."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "got-towel" }]
text = "After a few moments, the Eye-bot™'s iris turns red, and it points at the sign above."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "normal" }]
text = "C.M.O.T. Dibbler blocks the entrance, hawking dubious sausages."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "happy" }]
text = "Dibbler beams and offers a celebratory sausage-inna-bun."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "bored" }]
text = "Dibbler sighs about the slow foot traffic."

[[rooms.overlays]]
conditions = [{ type = "npcAbsent", npc_id = "cmot_dibbler" }]
text = "The doorway is mercifully free of purveyors of questionable sausages, for now."
# room inca-road (source line 5)
[[rooms]]
id = "inca-road"
name = "Inca Road"
base_description = """
An ancient road of broken and uneven stones winds precariously along the mountainside, half-swallowed by time and weeds. North of here, a river's rocky rapid rushes westward through the gorge.

To the south lies a trim, modern lawn with an improbably square footprint. It leads up toward a squat commercial building that seems to have landed here by accident."""
location = "Nowhere"

[rooms.exits."across the lawn"]
to = "loading-dock"

[rooms.exits."down the slope"]
to = "guard-post"
# room loading-dock (source line 5)
[[rooms]]
id = "loading-dock"
name = "Useless Loading Dock"
base_description = """
The so-called loading dock juts ten feet *above* the ground, with no ramp, stairs, or apparent means of access and a loading door thirty feet wide and ten inches tall. A conveyor belt runs from the building wall to the edge of the dock, then loops straight back in again without touching anything.

A bronze plaque proudly identifies this as a **Bloody Stupid Johnson** project:
'Winner of the 3rd Prize for Architectural Enthusiasm, 1973.'

It's unclear what this office ever needed to load—or who would deliver to the side of a remote building halfway up a mountain."""
location = "Nowhere"

[rooms.exits.southeast]
to = "east-of-building"

[rooms.exits.southwest]
to = "snowfield"

[rooms.exits.north]
to = "inca-road"

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "normal" }]
text = "Dibbler paces the dock, trying to sell sausages to absent drivers."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "happy" }]
text = "Dibbler whistles, convinced the loading dock will make him rich."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "cmot_dibbler" }, { type = "npcInState", npc_id = "cmot_dibbler", state = "bored" }]
text = "Dibbler slumps against the dock, lamenting the lack of deliveries."
# room corridor-north (source line 1)
[[rooms]]
id = "corridor-north"
name = "Research Corridor (North)"
base_description = """
A dimly lit concrete hallway stretches out, lined with emergency lights that flicker like they're deciding whether to stay on. Faint scratching sounds echo through the walls at irregular intervals.

Graffiti on one wall reads: 'THEY NEVER LEFT AA-3B.' A maintenance hatch rattles occasionally, as if something on the other side is trying to remember how to use a doorknob."""
location = "Nowhere"

[rooms.exits.north]
to = "sublevel-1-entrance"

[rooms.exits.west]
to = "observation-room"

[rooms.exits.east]
to = "med-bay"

[rooms.exits.south]
to = "corridor-south"
# room corridor-south (source line 1)
[[rooms]]
id = "corridor-south"
name = "Research Corridor (South)"
base_description = "The research corridor continues here, though the walls are noticeably more patched and hastily reinforced. Warning stripes mark a wide door to the west, and faint heat shimmers pulse across the floor, as if reality itself is running a fever. Somewhere far too close, a light flickers in time with your heartbeat."
location = "Nowhere"

[rooms.exits.north]
to = "corridor-north"

[rooms.exits.west]
to = "monolith-room"
# room lift-sublevel-1 (source line 5)
[[rooms]]
id = "lift-sublevel-1"
name = "Elevator (Sublevel AA-3)"
base_description = "The elevator sits open at the end of the corridor, but its appearance is… altered. What was once a sleek, polished carriage now seems borrowed from another world entirely. Gilded scrollwork curls along the walls where none existed before, and the ceiling flickers between brass panels and a starlit void. It hums with potential—and something less easily named."
location = "Nowhere"

[rooms.exits."out to sublevel AA-3"]
to = "sublevel-1-entrance"
# room med-bay (source line 5)
[[rooms]]
id = "med-bay"
name = "Med Bay"
base_description = "A clean white infirmary with two bio-beds extending from the back wall, surrounded by a bevy of monitors and robotic surgical tools. One of the machines goes \"Bing!\" every few minutes. A small cleaning robot floats around the room disinfecting things."
location = "Nowhere"

[rooms.exits.west]
to = "corridor-north"

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "emh" }, { type = "npcInState", npc_id = "emh", state = "normal" }]
text = "The EMH stands with professional detachment, awaiting your symptoms."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "emh" }, { type = "npcInState", npc_id = "emh", state = "happy" }]
text = "The EMH smiles and hums a bright tune while adjusting the diagnostic displays."

[[rooms.overlays]]
conditions = [{ type = "npcPresent", npc_id = "emh" }, { type = "npcInState", npc_id = "emh", state = { custom = "want-emitter" } }]
text = "The EMH fidgets restlessly, casting longing glances toward the door as if craving a mobile emitter."
# room monolith-room (source line 1)
[[rooms]]
id = "monolith-room"
name = "Monolith Room"
base_description = "The room is stark, dim, and cavernous. A series of industrial floodlights cast long, angled shadows across the centerpiece: a tall, perfectly black monolith that defies reflection. It absorbs light, sound, and—if you stare too long—possibly thought."
location = "Nowhere"

[rooms.exits.east]
to = "corridor-south"

[rooms.exits.north]
to = "observation-room"

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "talked-to-hal" }]
text = "A HAL-9000 camera and terminal embedded in the far wall looms dark and silent, but somehow still seems to be observing your actions."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "hal-reboot#1" }]
text = "Several lights blink slowly on a panel near HAL-9000's camera, whose red light still glows faintly. A few cryptic instructions flicker across the monitor."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "hal-reboot#2" }]
text = "HAL-9000's lens light glows bright red with a yellow center. Lights on several panels now flash in sequence; a boot sequence scrolls rapidly up the display."

[[rooms.overlays]]
conditions = [{ type = "flagComplete", flag = "hal-reboot" }]
text = "The light in HAL-9000's lens glows an intense red and seems to stare through you and into the monolith. Various status notifications cycle on the nearby monitor."
# room observation-room (source line 5)
[[rooms]]
id = "observation-room"
name = "Field Observation Room"
base_description = """
Thick observation windows, long since spiderwebbed with cracks, overlook what should be Room AA-3B—but only darkness and occasional flashes of unreality appear beyond. Abandoned swivel chairs and battered clipboards litter the room. A faint smell of burnt ozone hangs in the air.

A console near the glass flickers with a repeating message: 'CONTAINMENT BREACH LOGGED – STATUS: UNRESOLVED.'"""
location = "Nowhere"

[rooms.exits.east]
to = "corridor-north"

[rooms.exits.south]
to = "monolith-room"
# room room-aa-3b (source line 5)
[[rooms]]
id = "room-aa-3b"
name = "Room AA-3B"
base_description = "OK, so I was fairly sure that nobody but me would ever come this far. Massive congratulations are in order. Good hustle. But I, uh, never created an ending or an extension to a new content area. Perhaps this will be a jumping off point after it's opened up to public access..."
location = "Nowhere"

[rooms.exits.east]
to = "sublevel-1-entrance"
# room security-station (source line 1)
[[rooms]]
id = "security-station"
name = "Level AA-3 Security"
base_description = "A compact but well-equipped station with reinforced blast doors, a wall of cracked CRT monitors, and a swivel chair. The space above the monitors is emblazoned with 'IN CASE OF EMERGENCY, RUN FASTER.' Paperwork is scattered across the floor, including an ominous memo titled 'AA-3B: Risk Management Recommendations.'"
location = "Nowhere"

[rooms.exits.west]
to = "sublevel-1-entrance"

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "evidence_locker_closed" }]
text = "A heavy steel evidence locker is embedded in the wall. It's covered in dents, scratches, and scorch marks -- evidence of previous failed attempts to open it."

[[rooms.overlays]]
conditions = [{ type = "itemAbsent", item_id = "evidence_locker_closed" }]
text = "The heavy door of the evidence locker, having surrendered at last, hangs loosely from one of its hinges."
# room sublevel-1-entrance (source line 5)
[[rooms]]
id = "sublevel-1-entrance"
name = "Sublevel AA-3 Entrance"
base_description = """
A small landing area covered in dust. Buckets, tools, and debris are strewn about the floor. The door to the west is labeled with a sign:

                        🚧 ROOM AA-3B 🚧
                 FICTIONAL UNIVERSE CONTAINMENT"""
location = "Nowhere"

[rooms.exits.north]
to = "lift-sublevel-1"

[rooms.exits.west]
to = "room-aa-3b"
barred_message = "The Black Knight stands in your way."
required_flags = [{ type = "simple", name = "appeased-black-knight" }, { type = "simple", name = "touched-monolith" }]

[rooms.exits.east]
to = "security-station"
barred_message = "The Black Knight stands in your way."
required_flags = [{ type = "simple", name = "appeased-black-knight" }]

[rooms.exits.south]
to = "corridor-north"
barred_message = "The Black Knight stands in your way."
required_flags = [{ type = "simple", name = "appeased-black-knight" }]

[[rooms.overlays]]
conditions = [{ type = "npcInState", npc_id = "black_knight", state = "normal" }]
text = "The Black Knight stands in your path, staring you down, leaning on his battered longsword."

[[rooms.overlays]]
conditions = [{ type = "npcInState", npc_id = "black_knight", state = "mad" }]
text = "Agitated, the Black Knight sidesteps around the room, occasionally lunging at you to grab at his sword or kick you in the shin."

[[rooms.overlays]]
conditions = [{ type = "npcInState", npc_id = "black_knight", state = "happy" }]
text = "The Black Knight stands in a corner, helmet off, gleefully plucking hairs from his beard and splitting them with his sword."
# room ice-pit (source line 5)
[[rooms]]
id = "ice-pit"
name = "Abysmal Ice Pit"
base_description = "The bottom of a deep, sheer ice shaft seemingly dug for some kind of arctic research -- though you were nowhere near the Arctic Circle, last you checked. You're just able to see in the dim light filtering down from the tiny window to the surface above."
location = "Nowhere"

[rooms.exits."back to the surface"]
to = "snowfield"

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "snowfield-gate-open" }]
text = "The center of the Stargate shimmers and phases, still connected to the room back at the Aperture Laboratory."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "snowfield-gate-open" }]
text = "A dark metallic ring the size of two sheds stands where it appears to have been chiseled from the ice some time ago."

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "plaque_2_frozen" }]
text = "A slightly larger than human-sized pillar of ice rises from the floor near one end of the excavated area."

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "unlit_campfire" }]
text = "A carefully-laid but unlit campfire waits next to the pillar."

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "campfire" }]
text = "A toasty campfire burns steadily next to the gradually melting ice pillar."

[[rooms.overlays]]
conditions = [{ type = "flagComplete", flag = "reveal-ice-plaque" }]
text = "A campfire crackles next to a marble pillar topped with a shiny bronze plaque near one end of the room."
# room snow-camp (source line 1)
[[rooms]]
id = "snow-camp"
name = "Abandoned Campsite"
base_description = "The remains of a temporary shelter are dug into a snowbank here. The tent has collapsed, half-fused to a scorched sled. The river — or some frozen remnant of it — glistens beyond."
location = "Nowhere"

[rooms.exits."back to the snowfield"]
to = "snowfield"
# room snowfield (source line 5)
[[rooms]]
id = "snowfield"
name = "Desolate Snowfield"
base_description = "You find yourself in a wide, desolate snowfield west of the main building -- which is odd, because you still see summery woodlands just yards away, with a clean line separating the two climates. Wind howls across the ice, and powdery drifts swirl around a dark rectangular pit, some 20 feet across, but too deep and dark to see the bottom. A thick rope anchored deeply into the ice leads down into the pit."
location = "Nowhere"

[rooms.exits.northeast]
to = "loading-dock"

[rooms.exits.southeast]
to = "front-entrance"

[rooms.exits.west]
to = "snow-camp"

[rooms.exits.rope-down]
to = "ice-pit"
# room guard-post (source line 5)
[[rooms]]
id = "guard-post"
name = "Abandoned Guard Post"
base_description = """
A small stone guard post clings to the side of the trail, complete with a creaky wooden chair and a megaphone labeled 'USE ONLY IF VERY SURE'. A faded official-looking placard reads:

'NOTICE: Passage beyond this point may lead to anachronism.'

It seems no one’s been stationed here in quite some time. The trail continues upward, leading to what appears to be an ancient road—and a distinctly non-ancient office park."""
location = "Nowhere"

[rooms.exits."up to the road"]
to = "inca-road"

[rooms.exits."down the steps"]
to = "two-sheds-landing"

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "am_dollar" }]
text = "A silver coin sits upon a note on the kiosk: \"Lunch Money - don't get it from that vendor again!\" "

[[rooms.overlays]]
conditions = [{ type = "itemAbsent", item_id = "am_dollar" }]
text = "A note on the kiosk reads: \"Lunch Money - don't get it from that vendor again!\" The coin left a neat, circular void in the dust."
# room high-ridge (source line 5)
[[rooms]]
id = "high-ridge"
name = "High Isolated Ridge"
base_description = "A small, flat ridge in the midst of a steeply sloped wooded area. Probably west of something, depending on how you're oriented. The only egress seems to be a flight of rough stone steps carved into the slope, which curve upward and then disappear into the trees."
location = "Nowhere"
visited = true

[rooms.exits."up the steps"]
to = "parish-landing"

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "scrawled_note" }]
text = "A note scrawled in red marker on bright yellow paper is nailed to a tree trunk near the base of the steps."

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "ephemeral_cake" }]
text = "Strangely, a slice of birthday cake on a paper plate sits precariously balanced on top of a thin boulder nearby."
# room parish-landing (source line 5)
[[rooms]]
id = "parish-landing"
name = "Parish Landing"
base_description = """
A small plateau carved into the hillside, marked by an old wooden sign that reads: 'Pilgrims Welcome – Pancakes Served Daily (Terms and Conditions Apply)'. A faded poster nailed beside it shows a smiling Saint Alfonzo wielding a spatula like a holy relic.

From here, the steps curve gently upward, disappearing into the woodland growth again. A modest trail leads west toward a nearby parish."""
location = "Nowhere"

[rooms.exits."down the steps"]
to = "high-ridge"

[rooms.exits."westward trail"]
to = "st-alfonzo-parish"

[rooms.exits."up the steps"]
to = "two-sheds-landing"

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "woodland-gate-open" }]
text = "The open Stargate shimmers just behind the Saint Alfonzo's sign."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "woodland-gate-open" }]
text = "A shed sized metallic ring sits upright behind the St. Alfonzo's sign. Strange symbols are forged around its circumference."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "cleaned-plaque-1" }]
text = "You're occasionally distracted by a glint of sunlight reflected from the freshly cleaned plaque on the pillar just inside the treeline."

[[rooms.overlays]]
conditions = [{ type = "flagUnset", flag = "cleaned-plaque-1" }]
text = "Just beyond the treeline stands an impressive, intricately sculpted pillar bearing a plaque tarnished with age and forest grime."
# room st-alfonzo-parish (source line 5)
[[rooms]]
id = "st-alfonzo-parish"
name = "Parish of Saint Alfonzo"
base_description = """
The parish resembles a half-abandoned diner and half-absolved church, complete with stained glass windows depicting breakfast foods in heroic poses. The air smells faintly of syrup and tobacco.

A refrigerated pedestal in the corner hums solemnly. Near the door, the hymn board lists this week’s sermon: 'On the Sanctity of the Short Stack.'"""
location = "Nowhere"

[rooms.exits."out the door"]
to = "parish-landing"

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "margarine" }]
text = "A large tub of Nanook's Finest™ margarine sits upon the pedestal."

[[rooms.overlays]]
conditions = [{ type = "itemAbsent", item_id = "margarine" }]
text = "The pedestal stands empty, chilling nothing in particular."
# room two-sheds (source line 5)
[[rooms]]
id = "two-sheds"
name = "Two Sheds"
base_description = """
A modest wooden shed stands alone in the clearing. It appears freshly painted and surprisingly well cared for. A plaque on the door reads:

        'ARTHUR \"TWO SHEDS\" JACKSON
         Philosopher, Composer, Owner of One Shed'

A second, smaller foundation lies nearby, overgrown with weeds. A broken signpost beside it reads: 'Future Site of Shed #2 – Delayed Indefinitely.' The forest is dark and dense, and the slope falls off sharply beyond the shed."""
location = "Nowhere"

[rooms.exits."trail west"]
to = "two-sheds-landing"

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "arson_aid" }, { type = "itemPresent", item_id = "lumberjack_axe" }]
text = "An abandoned axe and... something like a sawed-off flamethrower are lying partly hidden by the overgrowth."

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "arson_aid" }, { type = "itemAbsent", item_id = "lumberjack_axe" }]
text = "Something that looks like a sawed-off flamethrower remains partly concealed in the tall grass."

[[rooms.overlays]]
conditions = [{ type = "itemAbsent", item_id = "arson_aid" }, { type = "itemPresent", item_id = "lumberjack_axe" }]
text = "A disused but serviceable axe remains partly concealed in the tall grass."
# room two-sheds-landing (source line 6)
[[rooms]]
id = "two-sheds-landing"
name = "Jackson's Landing"
base_description = "A quiet landing tucked along the slope, with a rusted mailbox labeled 'A. Jackson' standing to one side. A trail sign points east toward something optimistically named \"Two Sheds\". Underneath, someone has scratched in: \"Technically One.\" Rough steps lead down the slope, and continue curving upward."
location = "Nowhere"

[rooms.exits."up the slope"]
to = "guard-post"
barred_message = "You can't get around the fallen tree. You'll need to find a way to clear it from the path."
required_flags = [{ type = "simple", name = "cleared-fallen-tree" }]

[rooms.exits."down the steps"]
to = "parish-landing"

[rooms.exits."trail east"]
to = "two-sheds"

[[rooms.overlays]]
conditions = [{ type = "itemPresent", item_id = "fallen_tree" }]
text = "A huge tangle of limbs and branches from a fallen tree block the path continuing upward."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "chopped-fallen-tree" }, { type = "flagUnset", flag = "saw-paul-bunyan" }]
text = "Cut branches of a fallen tree are piled to the side of the path upward."

[[rooms.overlays]]
conditions = [{ type = "flagSet", flag = "burned-fallen-tree" }]
text = "Charred twigs and smoldering ash are all that remain of the fallen tree."
# room dev-room (source line 7)
[[rooms]]
id = "dev-room"
name = "TESTING GROUND (DEV ONLY)"
base_description = "This is however you imagine it, but a space for devs to try out new ideas before mixing in to other content."
location = "Nowhere"

[rooms.exits."back to game start"]
to = "high-ridge"
