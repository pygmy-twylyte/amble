[[goals]]
id = "get-oriented"
name = "What the..?"
description = "Look around to get some clue as to what's going on. Type 'help' for some guidance."
group = { type = "required" }
finished_when = { type = "hasFlag", flag = "read-scrawled-note" }

[[goals]]
id = "find-the-office"
name = "Find the Office"
description = "According to the posted note, there's an office somewhere. You'll need to find it."
group = { type = "required" }
activate_when = { type = "goalComplete", goal_id = "get-oriented" }
finished_when = { type = "reachedRoom", room_sym = "b-a-office" }

[[goals]]
id = "obtain-portal-power"
name = "Find a Power Source"
description = "You found a portal gun, but the power source is dead. Find another one or charge the empty battery to get the gun working."
group = { type = "required" }
activate_when = { type = "hasFlag", flag = "portal-gun-opened" }
finished_when = { type = "hasFlag", flag = "portal-opened" }

[[goals]]
id = "open-a-portal"
name = "Open a Portal"
description = "Now that you have a suitable power source, you should be able to turn the gun on to open a portal. But where will it lead?"
group = { type = "required" }
activate_when = { type = "goalComplete", goal_id = "obtain-portal-power" }
finished_when = { type = "hasFlag", flag = "done-flag" }

[[goals]]
id = "get-invited"
name = "Get an Invitation"
description = "The receptionist won't help you without an invitation; you'll need to get one somehow."
group = { type = "required" }
activate_when = { type = "goalComplete", goal_id = "find-the-office" }
finished_when = { type = "hasFlag", flag = "got-invitation" }

[[goals]]
id = "get-visitor-pass"
name = "Get a Visitor Pass"
description = "Now that you have an invitation, maybe the receptionist in the office will help you with this -- or maybe she won't."
group = { type = "required" }
activate_when = { type = "goalComplete", goal_id = "get-invited" }
finished_when = { type = "hasFlag", flag = "got-visitor-pass" }

[[goals]]
id = "get-elevator-keycard"
name = "Obtain Keycard"
description = "The last Candidate left it in the panic room. The receptionist is worried about it..."
group = { type = "required" }
activate_when = { type = "goalComplete", goal_id = "get-visitor-pass" }
finished_when = { type = "hasFlag", flag = "got-elevator-keycard" }

[[goals]]
id = "go-to-sublevel"
name = "Go To Room AA-3B"
description = "The receptionist said you should report to Room AA-3B for the next step in your evaluation, though she seemed hesitant to tell you."
group = { type = "required" }
activate_when = { type = "goalComplete", goal_id = "get_elevator_keycard" }
finished_when = { type = "reachedRoom", room_sym = "sublevel-1-entrance" }

[[goals]]
id = "get-past-knight"
name = "Get Past the Black Knight"
description = "Find a way past the Black Knight to the rest of the sublevel."
group = { type = "required" }
activate_when = { type = "hasFlag", flag = "talked-to-knight" }
finished_when = { type = "hasFlag", flag = "appeased-black-knight" }

[[goals]]
id = "reboot-hal"
name = "Reactivate HAL-9000"
description = "Reactivate HAL-9000 by talking to him and reinstalling his 3 missing memory modules."
group = { type = "required" }
activate_when = { type = "reachedRoom", room_sym = "monolith-room" }
finished_when = { type = "flagComplete", flag = "hal-reboot" }

[[goals]]
id = "read-plaque-1"
name = "Read the Plaque"
description = "Find a way to clean the plaque at High Ridge so you can read it."
group = { type = "optional" }
activate_when = { type = "hasFlag", flag = "tried-read-plaque-1" }
finished_when = { type = "hasFlag", flag = "read-plaque-1" }

[[goals]]
id = "clear-fallen-tree"
name = "Clear the Path"
description = "A fallen tree blocks your path -- you'll have to remove it somehow."
group = { type = "required" }
activate_when = { type = "reachedRoom", room_sym = "two-sheds-landing" }
finished_when = { type = "hasFlag", flag = "cleared-fallen-tree" }

[[goals]]
id = "poetry-survivor"
name = "Survive the Vogon Experience"
description = "Recover from reading the galaxy's third worst poem."
group = { type = "status-effect" }
activate_when = { type = "hasFlag", flag = "read-vogon-poetry" }
finished_when = { type = "missingFlag", flag = "status:nauseated" }

[[goals]]
id = "reach-aa3b"
name = "Investigate Room AA-3B"
description = "Figure out what's behind the mysterious sealed door."
group = { type = "required" }
activate_when = { type = "hasFlag", flag = "entered-sublevel-1" }
finished_when = { type = "reachedRoom", room_sym = "room-aa-3b" }

[[goals]]
id = "find-hal-module-1"
name = "Find HAL Memory Module #1"
description = "Look around and talk to other characters to figure out where to find HAL's first missing module."
group = { type = "required" }
activate_when = { type = "flagInProgress", flag = "hal-reboot" }
finished_when = { type = "hasFlag", flag = "got-hint-from-emh" }

[[goals]]
id = "get-hal-module-1"
name = "Retrieve HAL Memory Module #1"
description = """The EMH has offered to help restore HAL, but only if you can repair and return his mobile emitter. Assist him and retrieve the first of HAL's memory modules."""
group = { type = "required" }
activate_when = { type = "flagInProgress", flag = "mobilize-emh" }
finished_when = { type = "hasItem", item_sym = "hal_module_1" }

[[goals]]
id = "insert-hal-module-1"
name = "Insert HAL Memory Module #1"
description = "Once mobilized, the EMH was able to retrieve the module for you. It must be inserted in HAL's memory bank (in the Observation Room) to activate it and advance HAL's reboot process."
group = { type = "required" }
activate_when = { type = "hasItem", item_sym = "hal_module_1" }
finished_when = { type = "hasFlag", flag = "module-1-inserted" }

[[goals]]
id = "find-hal-module-2"
name = "Find HAL Memory Module #2"
description = "Look around and talk to other characters to get a lead on the location of HAL's second memory module."
group = { type = "required" }
activate_when = { type = "flagInProgress", flag = "hal-reboot" }
finished_when = { type = "hasFlag", flag = "found-module-2" }

[[goals]]
id = "get-a-towel"
name = "Find a Towel"
description = "No traveler should ever be without one. The security system at the entrance to the building seems adamant that you have one before you go inside."
group = { type = "required" }
activate_when = { type = "reachedRoom", room_sym = "front-entrance" }
finished_when = { type = "hasFlag", flag = "got-towel" }
