{
  "name": "amble_dsl",
  "rules": {
    "program": {
      "type": "REPEAT",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SYMBOL",
            "name": "set_decl"
          },
          {
            "type": "SYMBOL",
            "name": "trigger"
          },
          {
            "type": "SYMBOL",
            "name": "room_def"
          },
          {
            "type": "SYMBOL",
            "name": "item_def"
          },
          {
            "type": "SYMBOL",
            "name": "spinner_def"
          },
          {
            "type": "SYMBOL",
            "name": "npc_def"
          },
          {
            "type": "SYMBOL",
            "name": "goal_def"
          }
        ]
      }
    },
    "comment": {
      "type": "TOKEN",
      "content": {
        "type": "SEQ",
        "members": [
          {
            "type": "STRING",
            "value": "#"
          },
          {
            "type": "PATTERN",
            "value": ".*"
          }
        ]
      }
    },
    "word": {
      "type": "SYMBOL",
      "name": "identifier"
    },
    "identifier": {
      "type": "PATTERN",
      "value": "[A-Za-z0-9_\\-:#]+"
    },
    "number": {
      "type": "PATTERN",
      "value": "-?\\d+"
    },
    "string": {
      "type": "CHOICE",
      "members": [
        {
          "type": "TOKEN",
          "content": {
            "type": "PATTERN",
            "value": "\\\"([^\\\"\\\\\\n]|\\\\.)*\\\""
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "PATTERN",
            "value": "'([^'\\\\\\n]|\\\\.)*'"
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "\"\"\""
              },
              {
                "type": "REPEAT",
                "content": {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "PATTERN",
                      "value": "[^\\\"]"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\"[^\\\"]"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\"\\\"[^\\\"]"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\\."
                    }
                  ]
                }
              },
              {
                "type": "STRING",
                "value": "\"\"\""
              }
            ]
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "'''"
              },
              {
                "type": "REPEAT",
                "content": {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "PATTERN",
                      "value": "[^']"
                    },
                    {
                      "type": "PATTERN",
                      "value": "'[^']"
                    },
                    {
                      "type": "PATTERN",
                      "value": "''[^']"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\\."
                    }
                  ]
                }
              },
              {
                "type": "STRING",
                "value": "'''"
              }
            ]
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "r#\""
              },
              {
                "type": "REPEAT",
                "content": {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "PATTERN",
                      "value": "[^\\\"]"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\"[^#]"
                    }
                  ]
                }
              },
              {
                "type": "STRING",
                "value": "\"#"
              }
            ]
          }
        }
      ]
    },
    "boolean": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "true"
        },
        {
          "type": "STRING",
          "value": "false"
        }
      ]
    },
    "set_decl": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "let"
        },
        {
          "type": "STRING",
          "value": "set"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "STRING",
          "value": "="
        },
        {
          "type": "SYMBOL",
          "name": "set_list"
        }
      ]
    },
    "set_list": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "SYMBOL",
              "name": "identifier"
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "SYMBOL",
                    "name": "identifier"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "trigger": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "trigger"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "identifier"
            },
            {
              "type": "SYMBOL",
              "name": "string"
            }
          ]
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "trigger_mod"
          }
        },
        {
          "type": "SYMBOL",
          "name": "trigger_block"
        }
      ]
    },
    "trigger_mod": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "only"
            },
            {
              "type": "STRING",
              "value": "once"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "when"
            },
            {
              "type": "SYMBOL",
              "name": "cond_line"
            }
          ]
        }
      ]
    },
    "trigger_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "trigger_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "trigger_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "if_block"
        },
        {
          "type": "SYMBOL",
          "name": "do_stmt"
        }
      ]
    },
    "if_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "if"
        },
        {
          "type": "SYMBOL",
          "name": "cond_line_ext"
        },
        {
          "type": "SYMBOL",
          "name": "braced_block"
        }
      ]
    },
    "do_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "do"
        },
        {
          "type": "REPEAT1",
          "content": {
            "type": "CHOICE",
            "members": [
              {
                "type": "SYMBOL",
                "name": "identifier"
              },
              {
                "type": "SYMBOL",
                "name": "string"
              },
              {
                "type": "SYMBOL",
                "name": "number"
              }
            ]
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "braced_block"
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "braced_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "trigger_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "cond_line": {
      "type": "REPEAT1",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SYMBOL",
            "name": "identifier"
          },
          {
            "type": "SYMBOL",
            "name": "string"
          },
          {
            "type": "SYMBOL",
            "name": "number"
          }
        ]
      }
    },
    "cond_line_ext": {
      "type": "REPEAT1",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SYMBOL",
            "name": "identifier"
          },
          {
            "type": "SYMBOL",
            "name": "string"
          },
          {
            "type": "SYMBOL",
            "name": "number"
          },
          {
            "type": "STRING",
            "value": "("
          },
          {
            "type": "STRING",
            "value": ")"
          },
          {
            "type": "STRING",
            "value": ","
          }
        ]
      }
    },
    "room_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "room_block"
        }
      ]
    },
    "room_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "room_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "room_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "room_name"
        },
        {
          "type": "SYMBOL",
          "name": "room_desc"
        },
        {
          "type": "SYMBOL",
          "name": "room_visited"
        },
        {
          "type": "SYMBOL",
          "name": "overlay_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "exit_stmt"
        }
      ]
    },
    "room_name": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "room_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "desc"
            },
            {
              "type": "STRING",
              "value": "description"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "room_visited": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "visited"
        },
        {
          "type": "SYMBOL",
          "name": "boolean"
        }
      ]
    },
    "overlay_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "overlay"
        },
        {
          "type": "STRING",
          "value": "if"
        },
        {
          "type": "SYMBOL",
          "name": "cond_line_ext"
        },
        {
          "type": "SYMBOL",
          "name": "overlay_block"
        }
      ]
    },
    "overlay_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "overlay_entry"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "overlay_entry": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "set"
            },
            {
              "type": "SYMBOL",
              "name": "string"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "unset"
            },
            {
              "type": "SYMBOL",
              "name": "string"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "text"
            },
            {
              "type": "SYMBOL",
              "name": "string"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "normal"
            },
            {
              "type": "SYMBOL",
              "name": "string"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "happy"
            },
            {
              "type": "SYMBOL",
              "name": "string"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "bored"
            },
            {
              "type": "SYMBOL",
              "name": "string"
            }
          ]
        }
      ]
    },
    "exit_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "exit"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "identifier"
            },
            {
              "type": "SYMBOL",
              "name": "string"
            }
          ]
        },
        {
          "type": "STRING",
          "value": "->"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "exit_block"
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "exit_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "exit_attr"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "exit_attr": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "exit_required_flags"
            },
            {
              "type": "SYMBOL",
              "name": "exit_required_items"
            },
            {
              "type": "SYMBOL",
              "name": "exit_barred"
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": ","
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "exit_required_flags": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "required_flags"
        },
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "SYMBOL",
              "name": "identifier"
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "SYMBOL",
                    "name": "identifier"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "exit_required_items": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "required_items"
        },
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "SYMBOL",
              "name": "identifier"
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "SYMBOL",
                    "name": "identifier"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "exit_barred": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "barred"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "item_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "item_block"
        }
      ]
    },
    "item_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "item_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "item_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "item_name"
        },
        {
          "type": "SYMBOL",
          "name": "item_desc"
        },
        {
          "type": "SYMBOL",
          "name": "item_portable"
        },
        {
          "type": "SYMBOL",
          "name": "item_text"
        },
        {
          "type": "SYMBOL",
          "name": "item_location"
        },
        {
          "type": "SYMBOL",
          "name": "item_ability"
        },
        {
          "type": "SYMBOL",
          "name": "item_container_state"
        },
        {
          "type": "SYMBOL",
          "name": "item_restricted"
        }
      ]
    },
    "item_name": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "item_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "desc"
            },
            {
              "type": "STRING",
              "value": "description"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "item_portable": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "portable"
        },
        {
          "type": "SYMBOL",
          "name": "boolean"
        }
      ]
    },
    "item_text": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "text"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "item_location": {
      "type": "SYMBOL",
      "name": "location"
    },
    "item_ability": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "ability"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        }
      ]
    },
    "item_container_state": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "container"
        },
        {
          "type": "STRING",
          "value": "state"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "open"
            },
            {
              "type": "STRING",
              "value": "closed"
            }
          ]
        }
      ]
    },
    "item_restricted": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "restricted"
        },
        {
          "type": "SYMBOL",
          "name": "boolean"
        }
      ]
    },
    "spinner_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "spinner"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "spinner_block"
        }
      ]
    },
    "spinner_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "wedge_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "wedge_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "wedge"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "width"
                },
                {
                  "type": "SYMBOL",
                  "name": "number"
                }
              ]
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "npc_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "npc_block"
        }
      ]
    },
    "npc_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "npc_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "npc_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "npc_name"
        },
        {
          "type": "SYMBOL",
          "name": "npc_desc"
        },
        {
          "type": "SYMBOL",
          "name": "location"
        },
        {
          "type": "SYMBOL",
          "name": "npc_state"
        },
        {
          "type": "SYMBOL",
          "name": "movement_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "dialogue_stmt"
        }
      ]
    },
    "npc_name": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "npc_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "desc"
            },
            {
              "type": "STRING",
              "value": "description"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "npc_state": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "state"
            },
            {
              "type": "CHOICE",
              "members": [
                {
                  "type": "STRING",
                  "value": "normal"
                },
                {
                  "type": "STRING",
                  "value": "happy"
                },
                {
                  "type": "STRING",
                  "value": "bored"
                },
                {
                  "type": "STRING",
                  "value": "mad"
                }
              ]
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "state"
            },
            {
              "type": "STRING",
              "value": "custom"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        }
      ]
    },
    "movement_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "movement"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "random"
            },
            {
              "type": "STRING",
              "value": "route"
            }
          ]
        },
        {
          "type": "STRING",
          "value": "rooms"
        },
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "SYMBOL",
              "name": "identifier"
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "SYMBOL",
                    "name": "identifier"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "timing"
                },
                {
                  "type": "SYMBOL",
                  "name": "identifier"
                }
              ]
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "active"
                },
                {
                  "type": "SYMBOL",
                  "name": "boolean"
                }
              ]
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "dialogue_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "dialogue"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "normal"
            },
            {
              "type": "STRING",
              "value": "happy"
            },
            {
              "type": "STRING",
              "value": "bored"
            },
            {
              "type": "STRING",
              "value": "mad"
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "custom"
                },
                {
                  "type": "SYMBOL",
                  "name": "identifier"
                }
              ]
            }
          ]
        },
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "string"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "location": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "location"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "room"
                },
                {
                  "type": "SYMBOL",
                  "name": "identifier"
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "npc"
                },
                {
                  "type": "SYMBOL",
                  "name": "identifier"
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "chest"
                },
                {
                  "type": "SYMBOL",
                  "name": "identifier"
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "inventory"
                },
                {
                  "type": "STRING",
                  "value": "player"
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "nowhere"
                },
                {
                  "type": "SYMBOL",
                  "name": "string"
                }
              ]
            }
          ]
        }
      ]
    },
    "goal_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "goal"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "goal_stmt"
          }
        }
      ]
    },
    "goal_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "goal_desc"
        },
        {
          "type": "SYMBOL",
          "name": "goal_group"
        },
        {
          "type": "SYMBOL",
          "name": "goal_done"
        },
        {
          "type": "SYMBOL",
          "name": "goal_start"
        }
      ]
    },
    "goal_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "desc"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "goal_group": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "group"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "required"
            },
            {
              "type": "STRING",
              "value": "optional"
            },
            {
              "type": "STRING",
              "value": "status-effect"
            }
          ]
        }
      ]
    },
    "goal_done": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "done"
        },
        {
          "type": "STRING",
          "value": "when"
        },
        {
          "type": "SYMBOL",
          "name": "goal_cond"
        }
      ]
    },
    "goal_start": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "start"
        },
        {
          "type": "STRING",
          "value": "when"
        },
        {
          "type": "SYMBOL",
          "name": "goal_cond"
        }
      ]
    },
    "goal_cond": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "has"
            },
            {
              "type": "STRING",
              "value": "flag"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "missing"
            },
            {
              "type": "STRING",
              "value": "flag"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "has"
            },
            {
              "type": "STRING",
              "value": "item"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "reached"
            },
            {
              "type": "STRING",
              "value": "room"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "goal"
            },
            {
              "type": "STRING",
              "value": "complete"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "flag"
            },
            {
              "type": "STRING",
              "value": "in"
            },
            {
              "type": "STRING",
              "value": "progress"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "flag"
            },
            {
              "type": "STRING",
              "value": "complete"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        }
      ]
    }
  },
  "extras": [
    {
      "type": "SYMBOL",
      "name": "comment"
    },
    {
      "type": "PATTERN",
      "value": "[\\s\\r\\n\\t]"
    }
  ],
  "conflicts": [],
  "precedences": [],
  "externals": [],
  "inline": [],
  "supertypes": []
}

