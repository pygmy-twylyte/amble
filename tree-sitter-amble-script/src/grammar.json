{
  "$schema": "https://tree-sitter.github.io/tree-sitter/assets/schemas/grammar.schema.json",
  "name": "amble_dsl",
  "rules": {
    "program": {
      "type": "REPEAT",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SYMBOL",
            "name": "set_decl"
          },
          {
            "type": "SYMBOL",
            "name": "trigger"
          },
          {
            "type": "SYMBOL",
            "name": "room_def"
          },
          {
            "type": "SYMBOL",
            "name": "item_def"
          },
          {
            "type": "SYMBOL",
            "name": "spinner_def"
          },
          {
            "type": "SYMBOL",
            "name": "npc_def"
          },
          {
            "type": "SYMBOL",
            "name": "goal_def"
          }
        ]
      }
    },
    "comment": {
      "type": "TOKEN",
      "content": {
        "type": "SEQ",
        "members": [
          {
            "type": "STRING",
            "value": "#"
          },
          {
            "type": "PATTERN",
            "value": ".*"
          }
        ]
      }
    },
    "identifier": {
      "type": "PATTERN",
      "value": "[A-Za-z0-9_\\-:#]+"
    },
    "number": {
      "type": "PATTERN",
      "value": "-?\\d+"
    },
    "string": {
      "type": "CHOICE",
      "members": [
        {
          "type": "PATTERN",
          "value": "\\\"([^\\\"\\\\]|\\\\.)*\\\""
        },
        {
          "type": "PATTERN",
          "value": "'([^'\\\\]|\\\\.)*'"
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "\"\"\""
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "CHOICE",
                "members": [
                  {
                    "type": "PATTERN",
                    "value": "[^\\\"]"
                  },
                  {
                    "type": "PATTERN",
                    "value": "\"\""
                  },
                  {
                    "type": "PATTERN",
                    "value": "\\\\."
                  }
                ]
              }
            },
            {
              "type": "STRING",
              "value": "\"\"\""
            }
          ]
        }
      ]
    },
    "boolean": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "true"
        },
        {
          "type": "STRING",
          "value": "false"
        }
      ]
    },
    "set_decl": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "let"
        },
        {
          "type": "STRING",
          "value": "set"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "STRING",
          "value": "="
        },
        {
          "type": "SYMBOL",
          "name": "set_list"
        }
      ]
    },
    "set_list": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "SYMBOL",
              "name": "identifier"
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "SYMBOL",
                    "name": "identifier"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "trigger": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "trigger"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "_trigger_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "_trigger_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "room_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "room_block"
        }
      ]
    },
    "room_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "room_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "room_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "room_name"
        },
        {
          "type": "SYMBOL",
          "name": "room_desc"
        },
        {
          "type": "SYMBOL",
          "name": "room_visited"
        },
        {
          "type": "SYMBOL",
          "name": "exit_stmt"
        }
      ]
    },
    "room_name": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "room_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "desc"
            },
            {
              "type": "STRING",
              "value": "description"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "room_visited": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "visited"
        },
        {
          "type": "SYMBOL",
          "name": "boolean"
        }
      ]
    },
    "exit_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "exit"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "STRING",
          "value": "->"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        }
      ]
    },
    "item_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "item_block"
        }
      ]
    },
    "item_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "item_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "item_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "item_name"
        },
        {
          "type": "SYMBOL",
          "name": "item_desc"
        },
        {
          "type": "SYMBOL",
          "name": "item_portable"
        }
      ]
    },
    "item_name": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "item_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "desc"
            },
            {
              "type": "STRING",
              "value": "description"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "item_portable": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "portable"
        },
        {
          "type": "SYMBOL",
          "name": "boolean"
        }
      ]
    },
    "spinner_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "spinner"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "spinner_block"
        }
      ]
    },
    "spinner_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "wedge_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "wedge_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "wedge"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "width"
                },
                {
                  "type": "SYMBOL",
                  "name": "number"
                }
              ]
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "npc_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "npc_block"
        }
      ]
    },
    "npc_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "npc_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "npc_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "npc_name"
        },
        {
          "type": "SYMBOL",
          "name": "npc_desc"
        },
        {
          "type": "SYMBOL",
          "name": "npc_location"
        }
      ]
    },
    "npc_name": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "npc_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "desc"
            },
            {
              "type": "STRING",
              "value": "description"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "npc_location": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "location"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "room"
                },
                {
                  "type": "SYMBOL",
                  "name": "identifier"
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "nowhere"
                },
                {
                  "type": "SYMBOL",
                  "name": "string"
                }
              ]
            }
          ]
        }
      ]
    },
    "goal_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "goal"
        },
        {
          "type": "SYMBOL",
          "name": "identifier"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "goal_stmt"
          }
        }
      ]
    },
    "goal_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "goal_desc"
        },
        {
          "type": "SYMBOL",
          "name": "goal_group"
        },
        {
          "type": "SYMBOL",
          "name": "goal_done"
        }
      ]
    },
    "goal_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "desc"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        }
      ]
    },
    "goal_group": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "group"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "required"
            },
            {
              "type": "STRING",
              "value": "optional"
            },
            {
              "type": "STRING",
              "value": "status-effect"
            }
          ]
        }
      ]
    },
    "goal_done": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "done"
        },
        {
          "type": "STRING",
          "value": "when"
        },
        {
          "type": "SYMBOL",
          "name": "goal_cond"
        }
      ]
    },
    "goal_cond": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "has"
            },
            {
              "type": "STRING",
              "value": "flag"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "missing"
            },
            {
              "type": "STRING",
              "value": "flag"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "has"
            },
            {
              "type": "STRING",
              "value": "item"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "reached"
            },
            {
              "type": "STRING",
              "value": "room"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "goal"
            },
            {
              "type": "STRING",
              "value": "complete"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "flag"
            },
            {
              "type": "STRING",
              "value": "in"
            },
            {
              "type": "STRING",
              "value": "progress"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "flag"
            },
            {
              "type": "STRING",
              "value": "complete"
            },
            {
              "type": "SYMBOL",
              "name": "identifier"
            }
          ]
        }
      ]
    }
  },
  "extras": [
    {
      "type": "SYMBOL",
      "name": "comment"
    },
    {
      "type": "PATTERN",
      "value": "[\\s\\r\\n\\t]"
    }
  ],
  "conflicts": [],
  "precedences": [],
  "externals": [],
  "inline": [],
  "supertypes": [],
  "reserved": {}
}